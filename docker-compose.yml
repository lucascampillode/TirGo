services:
  ros1_rob_tirgo:
    build:
      context: .
      dockerfile: Dockerfile
    privileged: true
    ipc: host
    network_mode: host
    environment:
      - DISPLAY=$DISPLAY
      - TIRGO_DB=/home/TirGo/carpeta_compartida/ros_ws/src/tirgo_ui/data/tirgo.db
      # ðŸ”½ NUEVO: URI hacia tu Mongo local (el que levantaste en infra)
      - MONGO_URI=mongodb://tirgo_user:tirgo_pass_cambia@localhost:27017/tirgo?authSource=tirgo
    volumes:
      - ${XAUTHORITY:-0}:/root/.Xauthority
      - /tmp/.X11-unix:/tmp/.X11-unix
      # Puedes dejarlo asÃ­â€¦
      - ./carpeta_compartida:/home/TirGo/carpeta_compartida
      # â€¦o si prefieres aislar, sustituye por:
      # - ./carpeta_compartida/ros_ws:/home/TirGo/carpeta_compartida/ros_ws
      # - ./carpeta_compartida/setup_env.sh:/home/TirGo/carpeta_compartida/setup_env.sh:ro
      - /dev:/dev
    devices:
      - /dev/dri:/dev/dri
    group_add:
      - "audio"
    tmpfs:
      - /dev/shm:rw
